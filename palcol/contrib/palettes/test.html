<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dynamic CSS Palette</title>
  <style>
    body { font-family: sans-serif; padding: 1em; }
    #preview {
      width: 100%;
      height: 150px;
      margin-top: 1em;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>Dynamic Palette Loader</h1>

  <label>
    CSS filename:
    <input type="text"
           id="filename"
           value="">
  </label>
  <br><br>

  <label>
    Number of palette variables:
    <input type="number"
           id="count"
           value="5"
           min="2"
           max="10">
  </label>
  <br><br>

  <button onclick="loadPalette()">Load Palette</button>

  <div id="preview"></div>

  <script>
    function loadPalette() {
      const filename = document.getElementById("filename").value;
      const count = parseInt(document.getElementById("count").value, 10);

      let oldLink = document.getElementById("palette-link");

      if (oldLink) oldLink.remove();

      const link = document.createElement("link");

      link.id = "palette-link";
      link.rel = "stylesheet";
      link.href = `./css-code/${filename}.css`;

      document.head.appendChild(link);

      link.onload = () => {
        const root = getComputedStyle(document.documentElement);
        let gradient = "linear-gradient(to right";
        for (let i = 1; i <= count; i++) {
          gradient += `, var(--PALETTE-${i})`;
        }
        gradient += ")";
        document.getElementById("preview").style.background = gradient;
      };
    }
  </script>
</body>
</html>
